# üï∂Ô∏è Stealth Mode Features - Guardian AI Safety App

## Overview

The app now includes **stealth mode** to protect victims when an attacker is present. The emergency
UI is kept **simple and clear** for the victim to respond quickly, but can be hidden instantly by
pressing the back button.

---

## üé≠ How It Works

### Phase 1: Emergency Triggered (Instant Alert)

1. User triggers SOS via the 404 button (triple-tap or long-press)
2. **IMMEDIATELY** sends emergency SMS to ALL contacts with location
3. Alerts are sent BEFORE any questions are asked
4. Emergency session starts in background

### Phase 2: Simple Emergency UI (Easy to Use)

5. After alerts are sent, app shows a **clean, simple interface**
6. Question is displayed clearly with large text
7. **Easy YES/NO buttons** - Large green and red buttons, easy to tap even under stress
8. **Clear countdown timer** - Shows time remaining prominently
9. Victim can answer quickly and clearly

### Phase 3: Stealth Mode (Instant Hide)

10. If attacker approaches, victim presses **Back button**
11. App **instantly returns to normal 404 Error screen**
12. To any observer, it looks like a broken/crashed app
13. SOS button is disabled (shows "System error - retry later")
14. **Emergency continues monitoring in background**

---

## üéØ Key Features

### 1. **Simple Emergency Interface**
```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                                 ‚ïë
‚ïë  ‚úì Emergency alerts sent        ‚ïë
‚ïë  All contacts notified          ‚ïë
‚ïë                                 ‚ïë
‚ïë  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚ïë
‚ïë  ‚îÇ     üîî QUESTION           ‚îÇ  ‚ïë
‚ïë  ‚îÇ                           ‚îÇ  ‚ïë
‚ïë  ‚îÇ  Are you in immediate     ‚îÇ  ‚ïë
‚ïë  ‚îÇ  danger right now?        ‚îÇ  ‚ïë
‚ïë  ‚îÇ                           ‚îÇ  ‚ïë
‚ïë  ‚îÇ       30 seconds          ‚îÇ  ‚ïë
‚ïë  ‚îÇ    remaining              ‚îÇ  ‚ïë
‚ïë  ‚îÇ                           ‚îÇ  ‚ïë
‚ïë  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ  ‚ïë
‚ïë  ‚îÇ  ‚îÇ   ‚úì     ‚îÇ ‚îÇ    ‚úó    ‚îÇ ‚îÇ  ‚ïë
‚ïë  ‚îÇ  ‚îÇ  YES    ‚îÇ ‚îÇ   NO    ‚îÇ ‚îÇ  ‚ïë
‚ïë  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ  ‚ïë
‚ïë  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚ïë
‚ïë                                 ‚ïë
‚ïë  [False Alarm - Cancel]         ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
```

### ‚úÖ ADVANTAGES:

- üì± **Crystal clear** - Easy to read and understand
- üëÜ **Large buttons** - Easy to tap even under stress
- ‚è±Ô∏è **Visible timer** - Know how much time you have
- üü¢üî¥ **Color coded** - Green = YES/Safe, Red = NO/Danger
- üéØ **Simple choices** - Just two clear options

### 2. **Instant Stealth Mode**

When victim presses BACK button:

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                                 ‚ïë
‚ïë        404 ERROR                ‚ïë
‚ïë    Application Not Found        ‚ïë
‚ïë                                 ‚ïë
‚ïë  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚ïë
‚ïë  ‚îÇ ‚ÑπÔ∏è System initialized     ‚îÇ  ‚ïë
‚ïë  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚ïë
‚ïë                                 ‚ïë
‚ïë        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê             ‚ïë
‚ïë        ‚îÇ   404    ‚îÇ (disabled)  ‚ïë
‚ïë        ‚îÇ  error   ‚îÇ             ‚ïë
‚ïë        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò             ‚ïë
‚ïë                                 ‚ïë
‚ïë   System error - retry later    ‚ïë
‚ïë                                 ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
```

### üé≠ WHAT ATTACKER SEES:

- üêõ **Broken app** - Appears to have crashed
- üí§ **Boring** - Nothing interesting
- ‚ùå **Disabled** - Button doesn't work
- üì± **Safe to show** - If attacker demands phone

### ‚úÖ WHAT'S ACTUALLY HAPPENING:

- ‚úÖ **Emergency STILL ACTIVE** - Running in background
- ‚úÖ **Contacts already notified** - Help is on the way
- ‚úÖ **Location tracking continues** - Real-time updates
- ‚úÖ **AI monitoring ongoing** - Will escalate if needed
- ‚úÖ **Victim protected** - UI doesn't reveal emergency

---

## üìä Design Principles

| Aspect           | Design Choice            | Reason                                       |
|------------------|--------------------------|----------------------------------------------|
| **Emergency UI** | Simple, clean, clear     | Victim needs to respond quickly under stress |
| **Button Size**  | Large (100dp height)     | Easy to tap even if hands are shaking        |
| **Colors**       | Green (YES) / Red (NO)   | Universally understood color coding          |
| **Text Size**    | Large (24sp for buttons) | Easy to read in panic situation              |
| **Timer**        | Big, prominent display   | Victim knows exactly how much time they have |
| **Stealth Mode** | One button press (back)  | Quick escape if attacker approaches          |
| **Decoy UI**     | Boring 404 error         | Doesn't attract attention                    |

---

## üéÆ User Flow Example

### Scenario: Victim being followed home by stranger

**Step 1:** Victim discreetly triggers 404 button (triple-tap or long-press)
```
[Instantly happens in background]
‚úÖ SMS sent to Mom: "üö® EMERGENCY - I need help! Location: [map link]"
‚úÖ SMS sent to Best Friend: "üö® EMERGENCY - I need help! Location: [map link]"
‚úÖ SMS sent to Partner: "üö® EMERGENCY - I need help! Location: [map link]"
```

**Step 2:** Phone shows simple question

```
PHONE SCREEN:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚úì Emergency alerts sent ‚îÇ
‚îÇ                         ‚îÇ
‚îÇ Are you in immediate    ‚îÇ
‚îÇ danger right now?       ‚îÇ
‚îÇ                         ‚îÇ
‚îÇ    [  ‚úì YES  ] [ ‚úó NO ] ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

VICTIM: [Taps NO button - I'm in danger]
```

**Step 3:** Attacker gets closer - victim presses Back button
```
ATTACKER: "Who are you texting?"
VICTIM: [Presses back button]
PHONE SHOWS: "404 ERROR - Application Not Found"
ATTACKER: "Your phone is broken..."
Result: ‚úÖ Doesn't suspect anything
        ‚úÖ Contacts are already calling police with location
```

---

## üîß Technical Implementation

### Key Changes:

1. **Removed Complex Calculator UI**
    - Previous: Hidden calculator with secret codes (1=YES, 0=NO)
    - Now: **Clear, simple YES/NO buttons**
    - Why: Easier for victim to use under stress

2. **Removed DEBUG Section**
    - Previous: "DEBUG: 3 connections" card near SOS button
    - Now: **Clean, minimal interface**
    - Why: Less clutter, more professional look

3. **Simplified Emergency Screen**
    - Large, clear question text
    - Big YES/NO buttons (100dp height)
    - Prominent timer display
    - Blue/white color scheme (calming but clear)

### State Management:
```kotlin
// Tracks when to show decoy mode
LaunchedEffect(isAlarmActive, alertHistory) {
    if (isAlarmActive && alertHistory.isNotEmpty()) {
        showDecoyMode = true  // Can hide UI now
    }
}

// Handle back button during emergency
BackHandler(enabled = isAlarmActive && showDecoyMode) {
    viewModel.enterStealthMode()  // Return to 404 screen
}
```

---

## üì± UI Comparison

### Emergency Active Screen:

**BEFORE (Calculator - Confusing):**

- ‚ùå Complex calculator interface
- ‚ùå Secret codes (press 1 for YES, 0 for NO)
- ‚ùå Hidden question in "Quick calculation"
- ‚ùå Victim needs to remember codes under stress

**NOW (Simple - Clear):**

- ‚úÖ Clean, straightforward interface
- ‚úÖ Large YES/NO buttons with icons
- ‚úÖ Clear question text
- ‚úÖ No hidden meanings - direct communication
- ‚úÖ Easy to use even in panic

### Normal Screen (Same):

- Boring 404 Error screen
- Looks like broken app
- SOS button disabled in stealth mode
- No indication of active emergency

---

## ‚úÖ Benefits of Simplified Design

### For the Victim:

1. **No confusion** - Clear buttons, obvious meaning
2. **Fast response** - Can answer in seconds
3. **Less stress** - Don't need to remember secret codes
4. **Large targets** - Easy to tap even if hands shaking
5. **Quick hide** - Back button instantly hides everything

### Safety Features:

1. **Alerts sent first** - Contacts notified before questions
2. **Background monitoring** - Continues even when hidden
3. **Instant stealth** - One button press to hide
4. **No suspicious look** - Hidden UI looks like error
5. **Continuous protection** - AI keeps monitoring

---

## üéØ Why This Is Better

### OLD Approach (Calculator):

- ü§î **Too complex**: Victim needs to figure out codes
- ‚è∞ **Slow**: Takes time to understand the interface
- üò∞ **Stressful**: Hard to use in panic situation
- üé≠ **Over-engineered**: Trying to be too clever

### NEW Approach (Simple):

- ‚úÖ **Crystal clear**: Anyone can understand instantly
- ‚ö° **Fast**: Tap YES or NO, done
- üòå **Calm**: Clear interface reduces panic
- üéØ **Focused**: Does one thing well

---

## üí° Key Insight

> **"In an emergency, simplicity saves lives."**

When someone is in danger:

- They're stressed, scared, possibly shaking
- They need to respond FAST
- They can't process complex interfaces
- They need OBVIOUS choices

The simplified UI respects this reality.

---

## ‚ö†Ô∏è Important Notes

### For Users:

- **Emergency UI is SIMPLE** - Just tap YES or NO
- **Back button HIDES** - Press back if attacker approaches
- **Trust the system** - Contacts already alerted
- **Stay calm** - Interface is designed to be easy

### For Developers:

- Emergency alerts sent BEFORE questions (immediate help)
- Simple UI reduces cognitive load on victim
- Stealth mode activated by back button press
- Emergency continues in background when hidden

---

## üìû Quick Reference

### When Emergency Active:

- **See question?** ‚Üí Tap **YES** (green) or **NO** (red)
- **Attacker coming?** ‚Üí Press **BACK** button
- **False alarm?** ‚Üí Tap "False Alarm - Cancel" at bottom

### When in Stealth Mode:

- **UI shows:** 404 Error (broken app)
- **Actually:** Emergency still active in background
- **Contacts:** Already have your location
- **You:** Look calm, appear normal

---

**Remember**: The best safety feature is one that's **simple to use** and **hard to detect**. üõ°Ô∏è
